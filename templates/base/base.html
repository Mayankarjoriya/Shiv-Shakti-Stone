{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Dynamic Page Title -->
    <title>{% block title %}Shiv Shakti Stone – Premium Handcrafted Stone Products in Jaipur{% endblock %}</title>

    <!-- Meta Description (override per page if needed) -->
    <meta name="description"
        content="{% block meta_description %}Shiv Shakti Stone offers premium handmade marble, granite, and sandstone products crafted in Sikandara, Jaipur. Custom designs, nationwide delivery. Contact us today!{% endblock %}">

    <!-- Canonical URL -->
    <link rel="canonical" href="{{ request.build_absolute_uri }}">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'core/images/favicon.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'core/images/favicon.png' %}">
    <link rel="shortcut icon" href="{% static 'core/images/favicon.png' %}">

    <!-- Open Graph / Social Meta -->
    <meta property="og:title" content="{% block og_title %}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta property="og:image" content="{% static 'images/hero-image.jpg' %}">
    <meta property="og:site_name" content="Shiv Shakti Stone">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}{% endblock %}">
    <meta name="twitter:image" content="{% static 'images/hero-image.jpg' %}">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'core/css/style.css' %}">

    <!-- Extra head block for page-specific tags -->
    {% block extra_head %}{% endblock %}
</head>

<body>

    <!-- Custom Cursor (if used globally) -->
    <div class="cursor"></div>
    <div class="cursor-follower"></div>

    <header>
        <nav class="navbar" aria-label="Main navigation">
            <a href="{% url 'home' %}" class="logo" aria-label="Shiv Shakti Stone Home">
                <i class="fas fa-gem" aria-hidden="true"></i>
                Shiv Shakti Stone
            </a>

            <button class="mobile-menu-btn" aria-label="Toggle navigation menu">
                <i class="fas fa-bars" aria-hidden="true"></i>
            </button>

            <ul class="nav-menu" role="menubar">
                <li class="nav-item" role="none">
                    <a href="{% url 'home' %}" class="btn btn-primary" role="menuitem">
                        <i class="fas fa-home" aria-hidden="true"></i> Home
                    </a>
                </li>
                <li class="nav-item" role="none">
                    <a href="{% url 'product_list' %}" class="btn btn-primary" role="menuitem">
                        <i class="fas fa-cubes" aria-hidden="true"></i> Products
                    </a>
                </li>
                <li class="nav-item" role="none">
                    <a href="{% url 'contact' %}" class="btn btn-primary" role="menuitem">
                        <i class="fas fa-phone" aria-hidden="true"></i> Contact
                    </a>
                </li>
            </ul>
        </nav>
    </header>

    <main class="container py-4" role="main">
        {% block content %}
        <!-- Page-specific content will be injected here -->
        {% endblock %}
    </main>

    <!-- Updated Footer with Real Info -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section contact-info">
                    <h2>Contact Us</h2>
                    <p><i class="fas fa-map-marker-alt" aria-hidden="true"></i> Shiv Shakti Stone, Jaipur Road,
                        Sikandara, Rajasthan, India</p>
                    <p><i class="fas fa-phone" aria-hidden="true"></i>
                        <a href="tel:+919799416741">+91 97994 16741</a>
                    </p>
                    <p><i class="fas fa-phone" aria-hidden="true"></i>
                        <a href="tel:+918094972696">+91 80949 72696</a>
                    </p>
                    <p><i class="fas fa-envelope" aria-hidden="true"></i>
                        <a href="mailto:shivshaktistone0@gmail.com">shivshaktistone0@gmail.com</a>
                    </p>
                </div>

                <div class="footer-section quick-links">
                    <h2>Quick Links</h2>
                    <ul>
                        <li><a href="{% url 'home' %}">Home</a></li>
                        <li><a href="#categories">Categories</a></li>
                        <li><a href="{% url 'product_list' %}">Products</a></li>
                        <li><a href="{% url 'contact' %}">Contact</a></li>
                    </ul>
                </div>

                <div class="footer-section social">
                    <h2>Follow Us</h2>
                    <div class="social-icons" aria-label="Social media links">
                        <a href="" aria-label="Facebook"><i class="fab fa-facebook-f" aria-hidden="true"></i></a>
                        <a
                            href="https://www.instagram.com/shiv_shakti_stone_0?utm_source=qr&igsh=MWpvdTdlOHViOXRqYw==aria-label=Instagram"><i
                                class="fab fa-instagram" aria-hidden="true"></i></a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; {% now "Y" %} Shiv Shakti Stone. All rights reserved. Crafted in Jaipur, Rajasthan.</p>
            </div>
        </div>
    </footer>

    <!-- Mobile Bottom Dock -->
    <nav class="mobile-bottom-dock d-lg-none" aria-label="Mobile navigation">
        <a href="{% url 'home' %}" class="dock-item" aria-label="Home">
            <i class="fas fa-home" aria-hidden="true"></i> Home
        </a>
        <a href="{% url 'product_list' %}" class="dock-item" aria-label="Products">
            <i class="fas fa-cubes" aria-hidden="true"></i> Products
        </a>
        <a href="{% url 'contact' %}" class="dock-item" aria-label="Contact">
            <i class="fas fa-envelope" aria-hidden="true"></i> Contact
        </a>
    </nav>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <!-- Custom JS -->
    <script>
        // (Your existing JavaScript remains unchanged — just cleaned up integrity attributes)
        document.addEventListener('DOMContentLoaded', function () {
            const currentPath = window.location.pathname;
            const dockItems = document.querySelectorAll('.mobile-bottom-dock .dock-item');

            dockItems.forEach(item => {
                const itemHref = item.getAttribute('href');
                if (
                    currentPath === '/' && itemHref === '/' ||
                    (currentPath.includes('/products') && itemHref.includes('products')) ||
                    (currentPath.includes('/contact') && itemHref.includes('contact'))
                ) {
                    dockItems.forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                }
            });
        });

        // Custom cursor
        const cursor = document.querySelector('.cursor');
        const follower = document.querySelector('.cursor-follower');
        let timeout;

        if (cursor && follower) {
            document.addEventListener('mousemove', (e) => {
                const x = e.clientX;
                const y = e.clientY;
                cursor.style.left = `${x}px`;
                cursor.style.top = `${y}px`;
                follower.style.left = `${x}px`;
                follower.style.top = `${y}px`;

                clearTimeout(timeout);
                cursor.style.cssText += 'width: 20px; height: 20px;';
                follower.style.cssText += 'width: 40px; height: 40px;';

                timeout = setTimeout(() => {
                    cursor.style.cssText += 'width: 6px; height: 6px;';
                    follower.style.cssText += 'width: 20px; height: 20px;';
                }, 100);
            });

            document.querySelectorAll('button, .btn, a').forEach(el => {
                el.addEventListener('mouseenter', () => follower && (follower.style.cssText += 'width: 50px; height: 50px;'));
                el.addEventListener('mouseleave', () => follower && (follower.style.cssText += 'width: 20px; height: 20px;'));
            });
        }

        // Ripple effect
        document.querySelectorAll('button, .btn').forEach(btn => {
            btn.addEventListener('click', function (e) {
                const x = e.clientX - this.getBoundingClientRect().left;
                const y = e.clientY - this.getBoundingClientRect().top;
                const ripple = document.createElement('span');
                ripple.className = 'ripple';
                Object.assign(ripple.style, { left: x + 'px', top: y + 'px' });
                this.appendChild(ripple);
                setTimeout(() => ripple.remove(), 600);
            });
        });

        // Mobile menu toggle
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navMenu = document.querySelector('.nav-menu');
        if (mobileMenuBtn && navMenu) {
            mobileMenuBtn.addEventListener('click', () => navMenu.classList.toggle('active'));
            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth <= 768) navMenu.classList.remove('active');
                });
            });
        }

        // Scroll animations
        const fadeElements = document.querySelectorAll('.fade-in');
        if ('IntersectionObserver' in window) {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('appear');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.15 });
            fadeElements.forEach(el => observer.observe(el));
        }

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    window.scrollTo({
                        top: target.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>

    <!-- Schema.org: Organization + Website -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Shiv Shakti Stone",
      "url": "{{ request.build_absolute_uri|slice:':-1'|default:request.build_absolute_uri }}",
      "logo": "{% static 'core/images/favicon.png' %}",
      "description": "Handcrafted natural stone products including marble, granite, and sandstone, made in Sikandara, Jaipur, Rajasthan.",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Jaipur Road, Sikandara",
        "addressLocality": "Sikandara",
        "addressRegion": "Rajasthan",
        "postalCode": "",
        "addressCountry": "IN"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+919799416741",
        "contactType": "Customer Service",
        "availableLanguage": "English, Hindi"
      },
      "sameAs": [
        "https://www.facebook.com/yourpage",
        "https://www.instagram.com/yourpage"
      ]
    }
    </script>

    <!-- Website Schema (for Google) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Shiv Shakti Stone",
      "url": "{{ request.build_absolute_uri|slice:':-1'|default:request.build_absolute_uri }}",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "{% url 'product_list' %}?search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
</body>

</html>